name: Deploy Next.js to Cloudflare Pages

on:
  push:
    branches:
      - main # Cháº¡y khi cÃ³ code Ä‘Æ°á»£c Ä‘áº©y lÃªn nhÃ¡nh main

jobs:
  deploy:
    runs-on: ubuntu-latest
    
    steps:
      - name: â¬‡ï¸ Checkout code
        uses: actions/checkout@v4

      - name: âš™ï¸ Setup Node.js
        uses: actions/setup-node@v4
        with:
          node-version: '20' # NÃªn dÃ¹ng phiÃªn báº£n Node.js LTS Ä‘Æ°á»£c Cloudflare há»— trá»£

      - name: ğŸ“¦ Install dependencies
        run: npm install # hoáº·c yarn install / pnpm install

      - name: ğŸ› ï¸ Build and Deploy
        uses: cloudflare/pages-action@v1
        with:
          apiToken: ${{ secrets.CLOUDFLARE_API_TOKEN }}
          accountId: ${{ secrets.CLOUDFLARE_ACCOUNT_ID }}
          projectName: your-project-name # TÃªn dá»± Ã¡n Pages cá»§a báº¡n trÃªn Cloudflare
          directory: .vercel/output/static # ThÆ° má»¥c output cho Next.js trÃªn Pages (cáº§n dÃ¹ng next-on-pages)
          # Náº¿u báº¡n sá»­ dá»¥ng next-on-pages, báº¡n sáº½ cáº§n cháº¡y lá»‡nh build
          command: npm run build # Lá»‡nh build cá»§a báº¡n, thÆ°á»ng lÃ  "next build" hoáº·c kÃ¨m next-on-pages
